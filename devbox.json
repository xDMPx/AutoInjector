{
  "$schema": "https://raw.githubusercontent.com/jetify-com/devbox/0.16.0/.schema/devbox.schema.json",
  "packages": [
    "nodejs@latest",
    "web-ext@latest"
  ],
  "env_from": ".env",
  "shell": {
    "init_hook": [
      "echo 'Welcome to devbox!' > /dev/null"
    ],
    "scripts": {
      "test": [
        "echo \"Error: no test specified\" && exit 1"
      ],
      "build": [
        "set -xe",
        "npx tsc",
        "npx @tailwindcss/cli -i ./src/dashboard.css -o ./dist/dashboard.css",
        "cp ./src/Material_Symbols_Outlined.css ./dist/Material_Symbols_Outlined.css",
        "cp ./src/Fira_Code_Nerd_Font.css ./dist/Fira_Code_Nerd_Font.css",
        "mkdir -p ./dist/fonts",
        "cp ./src/fonts/MaterialSymbolsOutlined/MaterialSymbolsOutlined-VariableFont_FILL,GRAD,opsz,wght.ttf ./dist/fonts/MaterialSymbolsOutlined-VariableFont_FILL,GRAD,opsz,wght.ttf",
        "cp ./src/fonts/FiraCodeNerdFont/FiraCodeNerdFont-Regular.ttf ./dist/fonts/FiraCodeNerdFont-Regular.ttf",
        "cp ./manifest.json ./dist/manifest.json",
        "cp ./src/dashboard.html ./dist/dashboard.html",
        "cp ./src/options.html ./dist/options.html"
      ],
      "update": [
        "npm update"
      ],
      "audit": [
        "npm audit"
      ],
      "lint": [
        "web-ext -s dist lint"
      ],
      "package": [
        "set -xe",
        "devbox run build",
        "web-ext -s dist build --overwrite-dest",
        "web-ext -s dist sign --channel=unlisted --api-key=$AMO_JWT_ISSUER --api-secret=$AMO_JWT_SECRET"
      ]
    }
  }
}
